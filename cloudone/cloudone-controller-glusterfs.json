{
    "kind": "ReplicationController",
    "apiVersion": "v1",
    "metadata": {
        "name": "cloudone-all",
        "labels": {
            "name": "cloudone-all"
        }
    },
    "spec": {
        "replicas": 1,
        "selector": {
            "name": "cloudone-all"
        },
        "template": {
            "metadata": {
                "labels": {
                    "name": "cloudone-all"
                }
            },
            "spec": {
                "volumes": [
                    {
                        "name": "docker",
                        "hostPath": {
                            "path": "/var/run/docker.sock"
                        }
                    },
                    {
                        "name": "cassandra-volume",
                        "glusterfs": {
                            "endpoints": "glusterfs",
                            "path": "cloudone_cassandra_volume",
                            "readOnly": false
                        }
                    },
                    {
                        "name": "elasticsearch-volume",
                        "glusterfs": {
                            "endpoints": "glusterfs",
                            "path": "cloudone_elasticsearch_volume",
                            "readOnly": false
                        }
                    }
                ],
                "containers": [
                    {
                        "name": "cloudone",
                        "image": "cloudawan/cloudone",
                        "ports": [
                            {
                                "name": "https-server", 
                                "containerPort": 8081
                            }
                        ],
                        "env": [
                            {
                                "name": "CASSANDRA_CLUSTER_HOST",
                                "value": "\"127.0.0.1\""
                            },
                            {
                                "name": "CASSANDRA_CLUSTER_PORT",
                                "value": "9042"
                            },
                            {
                                "name": "CASSANDRA_CLUSTER_REPLICATION_STRATEGY",
                                "value": "{'class': 'SimpleStrategy', 'replication_factor' : 1}"
                            },
                            {
                                "name": "EMAIL_SENDER_ACCOUNT",
                                "value": "cloudawanemailtest@gmail.com"
                            },
                            {
                                "name": "EMAIL_SENDER_PASSWORD",
                                "value": "cloudawan4test"
                            },
                            {
                                "name": "EMAIL_SENDER_HOST",
                                "value": "smtp.gmail.com"
                            },
                            {
                                "name": "EMAIL_SENDER_PORT",
                                "value": "587"
                            },
                            {
                                "name": "SMS_NEXMO_URL",
                                "value": "https://rest.nexmo.com/sms/json"
                            },
                            {
                                "name": "SMS_NEXMO_API_KEY",
                                "value": "2045d69e"
                            },
                            {
                                "name": "SMS_NEXMO_API_SECRET",
                                "value": "fcaf0b59"
                            },
                            {
                                "name": "GLUSTERFS_HOST",
                                "value": "\"192.168.0.25\", \"192.168.0.26\""
                            },
                            {
                                "name": "GLUSTERFS_MOUNT_PATH",
                                "value": "/data/glusterfs"
                            },
                            {
                                "name": "GLUSTERFS_SSH_USER",
                                "value": "cloudawan"
                            },
                            {
                                "name": "GLUSTERFS_SSH_PASSWORD",
                                "value": "cloud4win"
                            },
                            {
                                "name": "ETCD_HOST_AND_PORT",
                                "value": "\"192.168.0.31:4001\", \"192.168.0.32:4001\", \"192.168.0.33:4001\""
                            }
                        ],
                        "volumeMounts": [
                            {
                                "name": "docker",
                                "readOnly": true,
                                "mountPath": "/var/run/docker.sock"
                            }
                        ]
                    },
                    {
                        "name": "cloudone-gui",
                        "image": "cloudawan/cloudone_gui",
                        "ports": [
                            {
                                "name": "https-server", 
                                "containerPort": 8443
                            }
                        ],
                        "env": [
                            {
                                "name": "KUBEAPI_CLUSTER_HOST_AND_PORT",
                                "value": "192.168.0.31:8080, 192.168.0.32:8080, 192.168.0.33:8080"
                            },
                            {
                                "name": "CLOUDONE_HOST",
                                "value": "127.0.0.1"
                            },
                            {
                                "name": "CLOUDONE_PORT",
                                "value": "8081"
                            },
                            {
                                "name": "CLOUDONE_ANALYSIS_HOST",
                                "value": "127.0.0.1"
                            },
                            {
                                "name": "CLOUDONE_ANALYSIS_PORT",
                                "value": "8082"
                            }
                        ]
                    },
                    {
                        "name": "cloudone-analysis",
                        "image": "cloudawan/cloudone_analysis",
                        "ports": [
                            {
                                "name": "https-server", 
                                "containerPort": 8082
                            }
                        ],
                        "env": [
                            {
                                "name": "KUBEAPI_CLUSTER_HOST_AND_PORT",
                                "value": "\"192.168.0.31:8080\", \"192.168.0.32:8080\", \"192.168.0.33:8080\""
                            },
                            {
                                "name": "ELASTICSEARCH_CLUSTER_HOST",
                                "value": "\"127.0.0.1\""
                            },
                            {
                                "name": "ELASTICSEARCH_CLUSTER_PORT",
                                "value": "9200"
                            }
                        ]
                    },
                    {
                        "image": "library/elasticsearch:1.7",
                        "name": "elasticsearch",
                        "ports": [
                            {
                                "name": "rest",
                                "containerPort": 9200
                            }
                        ],
                        "volumeMounts": [
                            {
                                "name": "elasticsearch-volume",
                                "readOnly": false,
                                "mountPath": "/usr/share/elasticsearch/data"
                            }
                        ]
                    },
                    {
                        "name": "cassandra",
                        "image": "cloudawan/cassandra",
                        "ports": [
                            {
                                "name": "cql", 
                                "containerPort": 9042
                            },
                            {
                                "name": "thrift", 
                                "containerPort": 9160
                            }
                        ],
                        "env": [
                            {
                                "name": "SERVICE_NAME",
                                "value": "cassandra"
                            },
                            {
                                "name": "NAMESPACE",
                                "value": "default"
                            },
                            {
                                "name": "CLUSTER_NAME",
                                "value": "cloudone-all"
                            }
                        ],
                        "volumeMounts": [
                            {
                                "name": "cassandra-volume",
                                "readOnly": false,
                                "mountPath": "/var/lib/cassandra"
                            }
                        ]
                    }
                ]
            }
        }
    }
}
